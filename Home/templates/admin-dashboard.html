{% extends "main.html" %}
{% block body %}
<div class="container py-5">
    <h1 class="mb-4 text-center">Admin Dashboard</h1>

    <div class="row g-4 text-center mb-5">
        <div class="col-md-3">
            <div class="card shadow border-0 p-3">
                <i class="bi bi-building display-6 text-success"></i>
                <h5>Total Properties</h5>
                <h3>{{ total_properties }}</h3>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card shadow border-0 p-3">
                <i class="bi bi-person-badge display-6 text-primary"></i>
                <h5>Total Agents</h5>
                <h3>{{ total_agents }}</h3>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card shadow border-0 p-3">
                <i class="bi bi-people display-6 text-warning"></i>
                <h5>Total Clients</h5>
                <h3>{{ total_clients }}</h3>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card shadow border-0 p-3">
                <i class="bi bi-graph-up display-6 text-danger"></i>
                <h5>For Sale / Rent</h5>
                <h3>{{ sell_count }} / {{ rent_count }}</h3>
            </div>
        </div>
    </div>

    <!-- Charts Section -->

<div class="row g-4">
    <div class="col-md-4 text-center">
        <h5 class="mb-3">Sell vs Rent</h5>
        <img src="data:image/png;base64,{{ pie_chart }}" class="img-fluid rounded shadow">
    </div>
    <div class="col-md-4 text-center">
        <h5 class="mb-3">Properties per Type</h5>
        <img src="data:image/png;base64,{{ type_chart }}" class="img-fluid rounded shadow">
    </div>
    <div class="col-md-4 text-center">
        <h5 class="mb-3">Price Range Distribution</h5>
        <img src="data:image/png;base64,{{ price_hist }}" class="img-fluid rounded shadow">
    </div>
</div>

<div class="col-md-6 text-center">
    <h5 class="mb-3">Top 10 Agents by Listings</h5>
    <img src="data:image/png;base64,{{ top_agents_chart }}" class="img-fluid rounded shadow">
</div>

<div class="col-md-6 text-center">
    <h5 class="mb-3">Top 10 Locations</h5>
    <img src="data:image/png;base64,{{ top_locations_chart }}" class="img-fluid rounded shadow">
</div>





    <!-- Dashboard Actions -->
        <h5 class="fw-bold mb-4 text-center">User Management</h5>
        <div class="row g-4">
            <div class="col-md-3">
                <div class="card text-center shadow-sm h-100 border-0">
                    <div class="card-body">
                        <i class="fa fa-calendar-alt me-2 display-6 text-success"></i>
                        <h5 class="mt-3">Manage Properties</h5>
                        <p class="text-muted small">View and manage your properties</p>
                        <a href="" class="btn btn-primary btn-sm">Manage</a>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center shadow-sm h-100 border-0">
                    <div class="card-body">
                        <i class="bi bi-plus-circle display-5 text-success"></i>
                        <h5 class="mt-3">Add Property</h5>
                        <p class="text-muted small">Register a new property</p>
                        <a href="" class="btn btn-success btn-sm">Add Now</a>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center shadow-sm h-100 border-0">
                    <div class="card-body">
                        <i class="bi bi-person-lines-fill display-5 text-warning"></i>
                        <h5 class="mt-3">Edit Users</h5>
                        <p class="text-muted small">Edit user information</p>
                        <a href="" class="btn btn-warning btn-sm text-white">Edit</a>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center shadow-sm h-100 border-0">
                    <div class="card-body">
                        <i class="bi bi-box-arrow-right display-5 text-danger"></i>
                        <h5 class="mt-3">Logout</h5>
                        <p class="text-muted small">End your session</p>
                        <form action="{% url 'logout' %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger btn-sm">Logout</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
</div>
{% endblock %}
